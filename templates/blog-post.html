{% extends "base.html" %}

{% block title %}
<title>{{ page.title }} | Blog | {{ config.title }}</title>
{% endblock title %}

{% block opengraph %}
<meta property="og:title" content="{{ page.title }}">
<meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ page.summary | default(value=config.description) | striptags | truncate(length=160) }}{% endif %}">
<meta property="og:type" content="article">
<meta property="og:url" content="{{ page.permalink }}">
<meta property="og:image" content="{% if page.extra.og_image %}{{ config.base_url }}{{ page.extra.og_image }}{% else %}{{ config.base_url }}/images/og-default.png{% endif %}">
{% if page.date %}
<meta property="article:published_time" content="{{ page.date | date(format='%Y-%m-%dT%H:%M:%S') }}">
{% endif %}
{% if page.taxonomies.tags %}
{% for tag in page.taxonomies.tags %}
<meta property="article:tag" content="{{ tag }}">
{% endfor %}
{% endif %}
{% endblock opengraph %}

{% block content %}

<article class="blog-post">
  <header class="blog-post__header">
    <h1 class="blog-post__title">{{ page.title }}</h1>
    <div class="blog-post__meta">
      {% if page.date %}
      <span class="blog-post__meta-item">
        <time datetime="{{ page.date | date(format='%Y-%m-%d') }}">
          {{ page.date | date(format="%B %d, %Y") }}
        </time>
      </span>
      {% endif %}

      {% if page.extra.author %}
      <span class="blog-post__meta-divider">&middot;</span>
      <span class="blog-post__meta-item">{{ page.extra.author }}</span>
      {% endif %}

      {% if page.reading_time %}
      <span class="blog-post__meta-divider">&middot;</span>
      <span class="blog-post__meta-item">{{ page.reading_time }} min read</span>
      {% endif %}
    </div>
  </header>

  <div class="blog-post__content content">
    {{ page.content | safe }}
  </div>

  {# Share #}
  <footer class="blog-post__share">
    <div class="blog-post__share-label">Share this article</div>
    <div class="share-links">
      <a
        class="share-link"
        href="https://twitter.com/intent/tweet?text={{ page.title | urlencode }}&url={{ page.permalink | urlencode }}"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Share on X"
      >X / Twitter</a>
      <a
        class="share-link"
        href="https://www.linkedin.com/sharing/share-offsite/?url={{ page.permalink | urlencode }}"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Share on LinkedIn"
      >LinkedIn</a>
      <a
        class="share-link"
        href="mailto:?subject={{ page.title | urlencode }}&body={{ page.permalink | urlencode }}"
        aria-label="Share by email"
      >Email</a>
    </div>
  </footer>

  {# Tags #}
  {% if page.taxonomies.tags %}
  <footer class="blog-post__tags">
    <div class="blog-post__tags-label">Tagged in</div>
    <div class="tags">
      {% for tag in page.taxonomies.tags %}
      <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}" class="tag">{{ tag }}</a>
      {% endfor %}
    </div>
  </footer>
  {% endif %}

  {# Prev / Next Navigation #}
  {% if page.earlier or page.later %}
  <nav class="post-nav" aria-label="Post navigation">
    {% if page.later %}
    <a href="{{ page.later.permalink }}" class="post-nav__item post-nav__item--prev">
      <span class="post-nav__label">&larr; Previous</span>
      <span class="post-nav__title">{{ page.later.title }}</span>
    </a>
    {% endif %}

    {% if page.earlier %}
    <a href="{{ page.earlier.permalink }}" class="post-nav__item post-nav__item--next">
      <span class="post-nav__label">Next &rarr;</span>
      <span class="post-nav__title">{{ page.earlier.title }}</span>
    </a>
    {% endif %}
  </nav>
  {% endif %}

</article>

{% endblock content %}
